# Correr con
# artillery run test.yml
config:
  target: http://127.0.0.1:3000
  defaults:
    headers:
      Content-Type: application/json
      x-country: CL
      x-channel: Web
      x-commerce: Banco
      # x-api-key: Wpxmz97xYd8eK45N1XbqSjfr2KaJ67hO
      # Authorization: Bearer YIsuAp6R7XNd1fSfRghospat8132UPQRâ€‹
  phases:
    - duration: 10
      arrivalRate: 1
scenarios:
  - flow:
    - post:
        url: "/solicitud/"
        json:
          tipo: 1
          estado: 7
          solicitante:
            datos_identificacion:
              tipo: 1
              numero: "261317850"
              numero_serie: "100.200.300"
            datos_contacto:
              email: "prueba@prueba.cl"
              telefonos:
                - tipo: 1
                  codigo_area: 9
                  numero: "33990237"
        capture:
          - regexp: "[^]*"
            as: "msg"
    - log: "response {{ msg }}"
      # - get:
      #     url: "/stable/solicitud/?numeroSolicitud=6107"
      #     capture:
      #       - regexp: "[^]*"
      #         as: "msg"
      # - log: "response {{ msg }}"